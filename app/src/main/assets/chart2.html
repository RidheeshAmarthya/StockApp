<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Chart</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <style>
        #stock-chart-container {
            margin: auto;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
<div id="stock-chart-container"></div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
    function getQueryParam(param) {
        var searchParams = new URLSearchParams(window.location.search);
        return searchParams.get(param);
    }

    const ticker = getQueryParam('query') || 'AAPL'; // Default to 'AAPL'

    const stockData = {
        "AAPL": [
{
            "v": 22610,
            "vw": 173.7635,
            "o": 173.22,
            "c": 173.97,
            "h": 174.06,
            "l": 173.12,
            "t": 1714464000000,
            "n": 632
        },
        {
            "v": 22716,
            "vw": 174.2146,
            "o": 173.95,
            "c": 174.2,
            "h": 174.5,
            "l": 173.95,
            "t": 1714467600000,
            "n": 437
        },
        {
            "v": 23205,
            "vw": 174.3309,
            "o": 174.36,
            "c": 174.23,
            "h": 174.4,
            "l": 174.23,
            "t": 1714471200000,
            "n": 541
        },
        {
            "v": 35645,
            "vw": 173.9523,
            "o": 174.22,
            "c": 173.75,
            "h": 174.22,
            "l": 173.75,
            "t": 1714474800000,
            "n": 1084
        },
        {
            "v": 248344,
            "vw": 173.5583,
            "o": 173.95,
            "c": 173.28,
            "h": 174.5,
            "l": 172.79,
            "t": 1714478400000,
            "n": 6121
        },
        {
            "v": 5.920829e+06,
            "vw": 173.7258,
            "o": 173.21,
            "c": 174.46,
            "h": 174.74,
            "l": 172.65,
            "t": 1714482000000,
            "n": 71645
        },
        {
            "v": 6.47246e+06,
            "vw": 174.5499,
            "o": 174.46,
            "c": 174.16,
            "h": 174.99,
            "l": 174.025,
            "t": 1714485600000,
            "n": 148875
        },
        {
            "v": 4.865505e+06,
            "vw": 174.0052,
            "o": 174.17,
            "c": 174.15,
            "h": 174.4,
            "l": 173.605,
            "t": 1714489200000,
            "n": 113289
        },
        {
            "v": 3.584555e+06,
            "vw": 173.67,
            "o": 174.15,
            "c": 173.865,
            "h": 174.1999,
            "l": 173.245,
            "t": 1714492800000,
            "n": 48040
        },
        {
            "v": 3.713473e+06,
            "vw": 173.4727,
            "o": 173.86,
            "c": 173.68,
            "h": 173.93,
            "l": 173.1,
            "t": 1714496400000,
            "n": 46301
        },
        {
            "v": 4.085577e+06,
            "vw": 173.3721,
            "o": 173.68,
            "c": 173.1223,
            "h": 173.8799,
            "l": 172.84,
            "t": 1714500000000,
            "n": 45853
        },
        {
            "v": 1.4739508e+07,
            "vw": 171.4836,
            "o": 173.1201,
            "c": 170.05,
            "h": 173.26,
            "l": 170,
            "t": 1714503600000,
            "n": 144572
        },
        {
            "v": 3.221996e+06,
            "vw": 170.2277,
            "o": 170.33,
            "c": 169.9,
            "h": 170.89,
            "l": 168.45,
            "t": 1714507200000,
            "n": 11868
        },
        {
            "v": 103166,
            "vw": 169.8403,
            "o": 169.89,
            "c": 169.76,
            "h": 170,
            "l": 169.6093,
            "t": 1714510800000,
            "n": 2876
        },
        {
            "v": 88581,
            "vw": 170.1269,
            "o": 169.93,
            "c": 170.28,
            "h": 170.33,
            "l": 169.75,
            "t": 1714514400000,
            "n": 1419
        },
        {
            "v": 40291,
            "vw": 170.1286,
            "o": 170.23,
            "c": 169.96,
            "h": 170.31,
            "l": 169.96,
            "t": 1714518000000,
            "n": 966
        },
        {
            "v": 23770,
            "vw": 169.8602,
            "o": 170.5,
            "c": 169.79,
            "h": 170.5,
            "l": 169.51,
            "t": 1714550400000,
            "n": 717
        },
        {
            "v": 13685,
            "vw": 169.496,
            "o": 169.73,
            "c": 169.59,
            "h": 169.73,
            "l": 169.34,
            "t": 1714554000000,
            "n": 418
        },
        {
            "v": 24119,
            "vw": 169.9812,
            "o": 169.5,
            "c": 170.1,
            "h": 170.3,
            "l": 169.5,
            "t": 1714557600000,
            "n": 517
        },
        {
            "v": 36022,
            "vw": 170.0026,
            "o": 170.2,
            "c": 169.99,
            "h": 170.2,
            "l": 169.82,
            "t": 1714561200000,
            "n": 936
        },
        {
            "v": 259260,
            "vw": 169.8976,
            "o": 170.15,
            "c": 169.9702,
            "h": 170.6,
            "l": 169.5,
            "t": 1714564800000,
            "n": 5644
        },
        {
            "v": 4.72886e+06,
            "vw": 169.9642,
            "o": 169.96,
            "c": 170.3299,
            "h": 170.6387,
            "l": 169.11,
            "t": 1714568400000,
            "n": 62685
        },
        {
            "v": 5.468759e+06,
            "vw": 170.8445,
            "o": 170.32,
            "c": 171.105,
            "h": 171.35,
            "l": 170.17,
            "t": 1714572000000,
            "n": 137534
        },
        {
            "v": 4.285949e+06,
            "vw": 171.1784,
            "o": 171.1,
            "c": 171.52,
            "h": 171.6,
            "l": 170.645,
            "t": 1714575600000,
            "n": 112146
        },
        {
            "v": 3.348165e+06,
            "vw": 171.3983,
            "o": 171.52,
            "c": 171.06,
            "h": 171.72,
            "l": 171.06,
            "t": 1714579200000,
            "n": 41638
        },
        {
            "v": 3.086723e+06,
            "vw": 170.9448,
            "o": 171.055,
            "c": 171.23,
            "h": 171.249,
            "l": 170.61,
            "t": 1714582800000,
            "n": 38931
        },
        {
            "v": 7.393183e+06,
            "vw": 171.674,
            "o": 171.24,
            "c": 172.48,
            "h": 172.635,
            "l": 170.83,
            "t": 1714586400000,
            "n": 89807
        },
        {
            "v": 1.1948881e+07,
            "vw": 170.9939,
            "o": 172.49,
            "c": 169.31,
            "h": 172.705,
            "l": 169.25,
            "t": 1714590000000,
            "n": 147156
        },
        {
            "v": 1.420422e+06,
            "vw": 169.4245,
            "o": 169.28,
            "c": 170.06,
            "h": 170.34,
            "l": 169.1,
            "t": 1714593600000,
            "n": 4921
        },
        {
            "v": 86107,
            "vw": 170.1668,
            "o": 170.03,
            "c": 170.35,
            "h": 170.39,
            "l": 169.3,
            "t": 1714597200000,
            "n": 1513
        },
        {
            "v": 60959,
            "vw": 170.2163,
            "o": 170.3,
            "c": 170.15,
            "h": 170.45,
            "l": 169.3,
            "t": 1714600800000,
            "n": 768
        },
        {
            "v": 52982,
            "vw": 170.2362,
            "o": 170.29,
            "c": 170.35,
            "h": 170.49,
            "l": 170.08,
            "t": 1714604400000,
            "n": 1062
        }
            // Additional AAPL data points
        ],
        "NVDA": [
  {
            "v": 28343,
            "vw": 876.0153,
            "o": 877,
            "c": 873.67,
            "h": 878.88,
            "l": 872,
            "t": 1714464000000,
            "n": 1344
        },
        {
            "v": 15980,
            "vw": 873.848,
            "o": 874,
            "c": 872.2,
            "h": 875.59,
            "l": 871.25,
            "t": 1714467600000,
            "n": 605
        },
        {
            "v": 28495,
            "vw": 872.2215,
            "o": 872,
            "c": 875,
            "h": 875,
            "l": 870,
            "t": 1714471200000,
            "n": 1051
        },
        {
            "v": 83586,
            "vw": 876.1332,
            "o": 875,
            "c": 874.86,
            "h": 878.22,
            "l": 874.01,
            "t": 1714474800000,
            "n": 3083
        },
        {
            "v": 538793,
            "vw": 874.1498,
            "o": 876.8819,
            "c": 869.01,
            "h": 878.23,
            "l": 868.24,
            "t": 1714478400000,
            "n": 11405
        },
        {
            "v": 6.038025e+06,
            "vw": 877.6225,
            "o": 869.28,
            "c": 885.456,
            "h": 886,
            "l": 866.77,
            "t": 1714482000000,
            "n": 111191
        },
        {
            "v": 6.33473e+06,
            "vw": 880.6436,
            "o": 885.46,
            "c": 879.7053,
            "h": 888.19,
            "l": 873.5,
            "t": 1714485600000,
            "n": 150158
        },
        {
            "v": 4.782014e+06,
            "vw": 873.1508,
            "o": 879.7275,
            "c": 871.51,
            "h": 881.9,
            "l": 867.0003,
            "t": 1714489200000,
            "n": 112442
        },
        {
            "v": 3.259993e+06,
            "vw": 871.0368,
            "o": 871.5126,
            "c": 868.4153,
            "h": 875.39,
            "l": 865.84,
            "t": 1714492800000,
            "n": 60157
        },
        {
            "v": 3.092898e+06,
            "vw": 867.4669,
            "o": 868.4644,
            "c": 869.5717,
            "h": 871.2,
            "l": 863,
            "t": 1714496400000,
            "n": 57681
        },
        {
            "v": 2.816602e+06,
            "vw": 869.2189,
            "o": 869.75,
            "c": 867.885,
            "h": 871.8,
            "l": 866.52,
            "t": 1714500000000,
            "n": 49801
        },
        {
            "v": 4.600662e+06,
            "vw": 869.0925,
            "o": 867.75,
            "c": 863.7,
            "h": 873.89,
            "l": 863.35,
            "t": 1714503600000,
            "n": 87733
        },
        {
            "v": 1.852177e+06,
            "vw": 865.1306,
            "o": 864.02,
            "c": 850.2249,
            "h": 883.36,
            "l": 850.2249,
            "t": 1714507200000,
            "n": 32015
        },
        {
            "v": 644172,
            "vw": 849.2408,
            "o": 850.61,
            "c": 842.69,
            "h": 864.02,
            "l": 840.8,
            "t": 1714510800000,
            "n": 17475
        },
        {
            "v": 252667,
            "vw": 846.5057,
            "o": 842.02,
            "c": 848.41,
            "h": 850.98,
            "l": 841.15,
            "t": 1714514400000,
            "n": 8186
        },
        {
            "v": 142348,
            "vw": 849.6156,
            "o": 848.4,
            "c": 850.69,
            "h": 851.78,
            "l": 847.5,
            "t": 1714518000000,
            "n": 4729
        },
        {
            "v": 27693,
            "vw": 848.331,
            "o": 846.97,
            "c": 848.5,
            "h": 850.28,
            "l": 846.62,
            "t": 1714550400000,
            "n": 1373
        },
        {
            "v": 28360,
            "vw": 845.3433,
            "o": 848,
            "c": 844.82,
            "h": 848,
            "l": 841.78,
            "t": 1714554000000,
            "n": 1281
        },
        {
            "v": 11114,
            "vw": 844.7154,
            "o": 844.27,
            "c": 846.35,
            "h": 846.35,
            "l": 843.4,
            "t": 1714557600000,
            "n": 559
        },
        {
            "v": 117566,
            "vw": 848.5085,
            "o": 846.99,
            "c": 847.25,
            "h": 851.8,
            "l": 846.1,
            "t": 1714561200000,
            "n": 4275
        },
        {
            "v": 338325,
            "vw": 851.3317,
            "o": 847.75,
            "c": 851.45,
            "h": 864.02,
            "l": 846.0063,
            "t": 1714564800000,
            "n": 12449
        },
        {
            "v": 5.821145e+06,
            "vw": 849.4243,
            "o": 851.25,
            "c": 844.5001,
            "h": 855.6,
            "l": 841.46,
            "t": 1714568400000,
            "n": 118218
        },
        {
            "v": 8.464413e+06,
            "vw": 837.6518,
            "o": 845.29,
            "c": 838.5,
            "h": 846.4,
            "l": 830.04,
            "t": 1714572000000,
            "n": 194626
        },
        {
            "v": 7.97164e+06,
            "vw": 826.2638,
            "o": 838.7499,
            "c": 815.104,
            "h": 840.3999,
            "l": 815.02,
            "t": 1714575600000,
            "n": 193191
        },
        {
            "v": 5.405992e+06,
            "vw": 818.8015,
            "o": 815.16,
            "c": 818.005,
            "h": 823.6,
            "l": 812.5456,
            "t": 1714579200000,
            "n": 106765
        },
        {
            "v": 4.930577e+06,
            "vw": 821.9635,
            "o": 817.84,
            "c": 823.1,
            "h": 830.73,
            "l": 814.2,
            "t": 1714582800000,
            "n": 92838
        },
        {
            "v": 1.0007507e+07,
            "vw": 838.9755,
            "o": 823.76,
            "c": 853.98,
            "h": 854.58,
            "l": 821.55,
            "t": 1714586400000,
            "n": 166779
        },
        {
            "v": 1.0091834e+07,
            "vw": 845.4464,
            "o": 854.19,
            "c": 830.24,
            "h": 860,
            "l": 830,
            "t": 1714590000000,
            "n": 170567
        },
        {
            "v": 636397,
            "vw": 828.9127,
            "o": 830.41,
            "c": 826.6,
            "h": 831.86,
            "l": 823,
            "t": 1714593600000,
            "n": 9399
        },
        {
            "v": 101317,
            "vw": 829.1336,
            "o": 827,
            "c": 831.6,
            "h": 831.6,
            "l": 826.55,
            "t": 1714597200000,
            "n": 3719
        },
        {
            "v": 101967,
            "vw": 833.1823,
            "o": 831.5,
            "c": 834.7104,
            "h": 834.7104,
            "l": 830.41,
            "t": 1714600800000,
            "n": 3165
        },
        {
            "v": 138705,
            "vw": 838.5197,
            "o": 834.72,
            "c": 838.6,
            "h": 840.47,
            "l": 834.72,
            "t": 1714604400000,
            "n": 4412
        }
            // Additional NVDA data points
        ],
        "QCOM": [
   {
            "v": 200,
            "vw": 169.04,
            "o": 169.04,
            "c": 169.04,
            "h": 169.04,
            "l": 169.04,
            "t": 1714464000000,
            "n": 2
        },
        {
            "v": 1322,
            "vw": 168.7963,
            "o": 168.69,
            "c": 168.9,
            "h": 168.9,
            "l": 168.69,
            "t": 1714471200000,
            "n": 33
        },
        {
            "v": 745,
            "vw": 168.9951,
            "o": 168.85,
            "c": 169.04,
            "h": 169.04,
            "l": 168.85,
            "t": 1714474800000,
            "n": 16
        },
        {
            "v": 12087,
            "vw": 168.3359,
            "o": 169.19,
            "c": 168.18,
            "h": 169.9,
            "l": 167.72,
            "t": 1714478400000,
            "n": 356
        },
        {
            "v": 489762,
            "vw": 168.9296,
            "o": 167.86,
            "c": 168.79,
            "h": 169.24,
            "l": 167.82,
            "t": 1714482000000,
            "n": 7239
        },
        {
            "v": 613207,
            "vw": 168.6901,
            "o": 168.83,
            "c": 168.42,
            "h": 169.195,
            "l": 168.17,
            "t": 1714485600000,
            "n": 14792
        },
        {
            "v": 526562,
            "vw": 167.5548,
            "o": 168.425,
            "c": 167.34,
            "h": 168.425,
            "l": 166.9,
            "t": 1714489200000,
            "n": 12893
        },
        {
            "v": 574441,
            "vw": 167.0894,
            "o": 167.35,
            "c": 166.91,
            "h": 167.65,
            "l": 166.4,
            "t": 1714492800000,
            "n": 10283
        },
        {
            "v": 341894,
            "vw": 167.1591,
            "o": 166.88,
            "c": 167.425,
            "h": 167.58,
            "l": 166.73,
            "t": 1714496400000,
            "n": 9085
        },
        {
            "v": 369729,
            "vw": 167.2911,
            "o": 167.45,
            "c": 166.96,
            "h": 167.65,
            "l": 166.84,
            "t": 1714500000000,
            "n": 9279
        },
        {
            "v": 1.502319e+06,
            "vw": 166.5326,
            "o": 166.94,
            "c": 165.81,
            "h": 167.39,
            "l": 165.81,
            "t": 1714503600000,
            "n": 32914
        },
        {
            "v": 415136,
            "vw": 165.7526,
            "o": 165.85,
            "c": 165.4,
            "h": 165.91,
            "l": 164,
            "t": 1714507200000,
            "n": 805
        },
        {
            "v": 37352,
            "vw": 165.1784,
            "o": 165.24,
            "c": 165,
            "h": 165.5,
            "l": 164.5241,
            "t": 1714510800000,
            "n": 577
        },
        {
            "v": 6189,
            "vw": 165.1756,
            "o": 165,
            "c": 165.25,
            "h": 165.49,
            "l": 164.5876,
            "t": 1714514400000,
            "n": 88
        },
        {
            "v": 2848,
            "vw": 165.3529,
            "o": 165.28,
            "c": 165.48,
            "h": 165.48,
            "l": 165.25,
            "t": 1714518000000,
            "n": 38
        },
        {
            "v": 975,
            "vw": 164.6448,
            "o": 164.62,
            "c": 164.68,
            "h": 164.68,
            "l": 164.62,
            "t": 1714550400000,
            "n": 12
        },
        {
            "v": 1530,
            "vw": 164.6353,
            "o": 164.7,
            "c": 164.52,
            "h": 164.7,
            "l": 164.5,
            "t": 1714554000000,
            "n": 32
        },
        {
            "v": 2674,
            "vw": 164.4916,
            "o": 164.67,
            "c": 164.42,
            "h": 164.68,
            "l": 164.42,
            "t": 1714557600000,
            "n": 67
        },
        {
            "v": 2759,
            "vw": 164.5601,
            "o": 164.55,
            "c": 164.49,
            "h": 164.71,
            "l": 164.42,
            "t": 1714561200000,
            "n": 54
        },
        {
            "v": 12792,
            "vw": 164.8748,
            "o": 164.22,
            "c": 165.09,
            "h": 165.3,
            "l": 164.22,
            "t": 1714564800000,
            "n": 293
        },
        {
            "v": 1.004424e+06,
            "vw": 164.9606,
            "o": 165.5099,
            "c": 165.12,
            "h": 165.82,
            "l": 163.86,
            "t": 1714568400000,
            "n": 16977
        },
        {
            "v": 913016,
            "vw": 165.297,
            "o": 165.11,
            "c": 166.23,
            "h": 166.37,
            "l": 164.405,
            "t": 1714572000000,
            "n": 20476
        },
        {
            "v": 838608,
            "vw": 165.3259,
            "o": 166.22,
            "c": 164.47,
            "h": 166.285,
            "l": 164.47,
            "t": 1714575600000,
            "n": 18132
        },
        {
            "v": 1.257329e+06,
            "vw": 164.286,
            "o": 164.475,
            "c": 163.9,
            "h": 164.94,
            "l": 163.89,
            "t": 1714579200000,
            "n": 18090
        },
        {
            "v": 834113,
            "vw": 164.4047,
            "o": 163.885,
            "c": 164.8675,
            "h": 165.04,
            "l": 163.885,
            "t": 1714582800000,
            "n": 14603
        },
        {
            "v": 1.384045e+06,
            "vw": 166.7727,
            "o": 164.9,
            "c": 169.185,
            "h": 169.29,
            "l": 164.76,
            "t": 1714586400000,
            "n": 24682
        },
        {
            "v": 3.074747e+06,
            "vw": 166.0144,
            "o": 169.21,
            "c": 164.2,
            "h": 169.64,
            "l": 163.79,
            "t": 1714590000000,
            "n": 56213
        },
        {
            "v": 1.27323e+06,
            "vw": 169.6492,
            "o": 164.02,
            "c": 171.7,
            "h": 173.77,
            "l": 164.02,
            "t": 1714593600000,
            "n": 12775
        },
        {
            "v": 199396,
            "vw": 170.9478,
            "o": 171.75,
            "c": 170.08,
            "h": 172.25,
            "l": 169.5,
            "t": 1714597200000,
            "n": 1839
        },
        {
            "v": 34031,
            "vw": 170.2128,
            "o": 170.0355,
            "c": 169.96,
            "h": 170.5,
            "l": 169.8079,
            "t": 1714600800000,
            "n": 273
        },
        {
            "v": 28114,
            "vw": 170.4394,
            "o": 169.82,
            "c": 170.77,
            "h": 170.77,
            "l": 169.82,
            "t": 1714604400000,
            "n": 243
        }
            // Additional QCOM data points
        ]
    };

    const marketOpen = true;
    const lineColor = marketOpen ? "green" : "red";
    const transformedData = stockData[ticker].map(dataPoint => [dataPoint.t, dataPoint.c]);

    Highcharts.chart('stock-chart-container', {
        chart: {
            type: 'line',
            zoomType: 'x',
            backgroundColor: '#f0f0f0',
        },
        title: {
            text: `${ticker} Hourly Price Variation`,
            align: 'center',
        },
        xAxis: {
            type: 'datetime',
            tickInterval: (24 / 8) * 3600 * 1000,
            labels: {
                format: '{value:%H:%M}',
            },
            crosshair: true,
            gridLineWidth: 1,
        },
        yAxis: {
            title: {
                text: '',
            },
            opposite: true,
            gridLineColor: '#707073',
            gridLineWidth: 1,
        },
        tooltip: {
            shared: true,
            xDateFormat: '%A, %b %e, %H:%M',
        },
        legend: {
            enabled: false,
        },
        plotOptions: {
            series: {
                marker: {
                    enabled: false,
                },
                lineWidth: 3,
                color: lineColor,
            },
        },
        series: [{
            name: 'Price',
            data: transformedData,
        }],
        credits: {
            enabled: false,
        },
    });
});

</script>
</body>
</html>
